FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IHZuYy1kZXNrdG9wLWFwYgpkZXNjcmlwdGlvbjogQSBEZXNrdG9w\
IGVudmlyb25tZW50IGFjY2Vzc2libGUgdmlhIG5vVk5DLgpiaW5kYWJsZTogRmFsc2UKYXN5bmM6\
IG9wdGlvbmFsCm1ldGFkYXRhOgogIGRpc3BsYXlOYW1lOiAiVk5DIERlc2t0b3AgKEFQQikiCiAg\
aW1hZ2VVcmw6ICJodHRwczovL3VwbG9hZC53aWtpbWVkaWEub3JnL3dpa2lwZWRpYS9jb21tb25z\
L3RodW1iL2EvYTkvVGlnZXJWTkNfbG9nby5zdmcvNDhweC1UaWdlclZOQ19sb2dvLnN2Zy5wbmci\
CiAgbG9uZ0Rlc2NyaXB0aW9uOiB8CiAgICAgICAgICAgICAgICAgICAtIFRoaXMgQVBCIHdpbGwg\
cnVuIGEgZGVza3RvcCBvZiB5b3VyIGNob2ljZSBvbiB0aGUgZGlzdHJpYnV0aW9uIG9mIHlvdXIg\
Y2hvaWNlLgogICAgICAgICAgICAgICAgICAgLSBJbiBhZGRpdGlvbiBhIG5vVk5DIHNlcnZlciB3\
aWxsIGJlIGNvbmZpZ3VyZWQgc28geW91IGNhbiBlYXNpbHkgY29ubmVjdC4KICAgICAgICAgICAg\
ICAgICAgIC0gL2hvbWUvdm5jIGlzIGJhY2tlZCBieSBwZXJzaXN0ZW50IHN0b3JhZ2UuCiAgICAg\
ICAgICAgICAgICAgICAtIFRoZSBwbGFuIChkaXN0cmlidXRpb24pIGFuZCBtb3N0IHBhcmFtZXRl\
cnMgYXJlIHVwZGF0YWJsZS4KICAgICAgICAgICAgICAgICAgIC0gVGhlIGRlZmF1bHQgTGludXgg\
cGFzc3dvcmQgaXMgZmVkb3JhLgogIGRlcGVuZGVuY2llczoKICAtIGRvY2tlci5pby9hbnNpYmxl\
cGxheWJvb2tidW5kbGUvdm5jLWNsaWVudDpsYXRlc3QKICAtIGRvY2tlci5pby9hbnNpYmxlcGxh\
eWJvb2tidW5kbGUvdm5jLWRlc2t0b3A6ZjI4CiAgLSBkb2NrZXIuaW8vYW5zaWJsZXBsYXlib29r\
YnVuZGxlL3ZuYy1kZXNrdG9wOmYyNwpwbGFuczoKICAtIG5hbWU6IGYyOAogICAgZGVzY3JpcHRp\
b246IFJ1biBhIGRlc2t0b3Agb2YgeW91ciBjaG9pY2Ugb24gRmVkb3JhIDI4CiAgICBmcmVlOiBU\
cnVlCiAgICBtZXRhZGF0YToge30KICAgIHVwZGF0ZXNfdG86CiAgICAtIGYyNwogICAgcGFyYW1l\
dGVyczoKICAgIC0gbmFtZTogdm5jcGFzcwogICAgICB0aXRsZTogVk5DIFBhc3N3b3JkCiAgICAg\
IHR5cGU6IHN0cmluZwogICAgICByZXF1aXJlZDogdHJ1ZQogICAgICB1cGRhdGFibGU6IHRydWUK\
ICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICBtYXhsZW5ndGg6IDgKICAgIC0gbmFt\
ZTogZGUKICAgICAgdGl0bGU6IERlc2t0b3AgRW52aXJvbm1lbnQKICAgICAgdHlwZTogZW51bQog\
ICAgICBlbnVtOiBbJ2Z2d20nLCAnaTMnLCAnS0RFJywgJ0xYREUnLCAnTFhRdCcsICdNQVRFJywg\
J1N1Z2FyJywgJ3R3bScsICdYZmNlJ10KICAgICAgZGVmYXVsdDogJ1hmY2UnCiAgICAgIHVwZGF0\
YWJsZTogdHJ1ZQogICAgLSBuYW1lOiBkZXNoZWxsCiAgICAgIHRpdGxlOiBTaGVsbAogICAgICB0\
eXBlOiBlbnVtCiAgICAgIGVudW06IFsnYmFzaCcsICdjc2gnLCAna3NoJywgJ3NoJ10KICAgICAg\
ZGVmYXVsdDogJ2Jhc2gnCiAgICAgIHVwZGF0YWJsZTogdHJ1ZQogICAgLSBuYW1lOiByZXNvbHV0\
aW9uCiAgICAgIHRpdGxlOiBEZXNrdG9wIFJlc29sdXRpb24KICAgICAgdHlwZTogZW51bQogICAg\
ICBlbnVtOiBbJzgwMHg2MDAnLCAnMTAyNHg3NjgnLCAnMTI4MHgxMDI0JywgJzEzNjB4NzY4Jywg\
JzE0NDB4OTAwJywgJzE5MjB4MTA4MCddCiAgICAgIGRlZmF1bHQ6ICcxMzYweDc2OCcKICAgICAg\
dXBkYXRhYmxlOiB0cnVlCiAgLSBuYW1lOiBmMjcKICAgIGRlc2NyaXB0aW9uOiBSdW4gYSBEZXNr\
dG9wIG9mIHlvdXIgY2hvaWNlIG9uIEZlZG9yYSAyNyAKICAgIGZyZWU6IFRydWUKICAgIG1ldGFk\
YXRhOiB7fQogICAgdXBkYXRlc190bzoKICAgIC0gZjI4CiAgICBwYXJhbWV0ZXJzOiAKICAgIC0g\
bmFtZTogdm5jcGFzcwogICAgICB0aXRsZTogVk5DIFBhc3N3b3JkCiAgICAgIHR5cGU6IHN0cmlu\
ZwogICAgICByZXF1aXJlZDogdHJ1ZQogICAgICB1cGRhdGFibGU6IHRydWUKICAgICAgZGlzcGxh\
eV90eXBlOiBwYXNzd29yZAogICAgICBtYXhsZW5ndGg6IDgKICAgIC0gbmFtZTogZGUKICAgICAg\
dGl0bGU6IERlc2t0b3AgRW52aXJvbm1lbnQKICAgICAgdHlwZTogZW51bQogICAgICBlbnVtOiBb\
J2Z2d20nLCAnaTMnLCAnS0RFJywgJ0xYREUnLCAnTFhRdCcsICdNQVRFJywgJ1N1Z2FyJywgJ3R3\
bScsICdYZmNlJ10KICAgICAgZGVmYXVsdDogJ1hmY2UnCiAgICAgIHVwZGF0YWJsZTogdHJ1ZQog\
ICAgLSBuYW1lOiBkZXNoZWxsCiAgICAgIHRpdGxlOiBTaGVsbAogICAgICB0eXBlOiBlbnVtCiAg\
ICAgIGVudW06IFsnYmFzaCcsICdjc2gnLCAna3NoJywgJ3NoJ10KICAgICAgZGVmYXVsdDogJ2Jh\
c2gnCiAgICAgIHVwZGF0YWJsZTogdHJ1ZQogICAgLSBuYW1lOiByZXNvbHV0aW9uCiAgICAgIHRp\
dGxlOiBEZXNrdG9wIFJlc29sdXRpb24KICAgICAgdHlwZTogZW51bQogICAgICBlbnVtOiBbJzgw\
MHg2MDAnLCAnMTAyNHg3NjgnLCAnMTI4MHgxMDI0JywgJzEzNjB4NzY4JywgJzE0NDB4OTAwJywg\
JzE5MjB4MTA4MCddCiAgICAgIGRlZmF1bHQ6ICcxMzYweDc2OCcKICAgICAgdXBkYXRhYmxlOiB0\
cnVlCg=="



COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
