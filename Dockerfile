FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IHZuYy1kZXNrdG9wLWFwYgpkZXNjcmlwdGlvbjogVGhpcyBpcyBh\
IHNhbXBsZSBhcHBsaWNhdGlvbiBnZW5lcmF0ZWQgYnkgYXBiIGluaXQKYmluZGFibGU6IEZhbHNl\
CmFzeW5jOiBvcHRpb25hbAptZXRhZGF0YToKICBkaXNwbGF5TmFtZTogIlZOQyBEZXNrdG9wIChB\
UEIpIgogIGltYWdlVXJsOiAiaHR0cHM6Ly91cGxvYWQud2lraW1lZGlhLm9yZy93aWtpcGVkaWEv\
Y29tbW9ucy90aHVtYi9hL2E5L1RpZ2VyVk5DX2xvZ28uc3ZnLzQ4cHgtVGlnZXJWTkNfbG9nby5z\
dmcucG5nIgogIGxvbmdEZXNjcmlwdGlvbjogVGhpcyBBUEIgd2lsbCBydW4gYSBkZXNrdG9wIG9m\
IHlvdXIgY2hvaWNlIG9uIHRoZSBkaXN0cmlidXRpb24gb2YgeW91ciBjaG9pY2UuIEluIGFkZGl0\
aW9uIGEgbm9WTkMgc2VydmVyIHdpbGwgYmUgY29uZmlndXJlZCBzbyB5b3UgY2FuIGVhc2lseSBj\
b25uZWN0LgogIGRlcGVuZGVuY2llczoKICAtIGRvY2tlci5pby9hbnNpYmxlcGxheWJvb2tidW5k\
bGUvdm5jLWNsaWVudDpsYXRlc3QKICAtIGRvY2tlci5pby9hbnNpYmxlcGxheWJvb2tidW5kbGUv\
dm5jLWRlc2t0b3A6ZjI4CiAgLSBkb2NrZXIuaW8vYW5zaWJsZXBsYXlib29rYnVuZGxlL3ZuYy1k\
ZXNrdG9wOmYyNwpwbGFuczoKICAtIG5hbWU6IGYyOAogICAgZGVzY3JpcHRpb246IFJ1biBhIGRl\
c2t0b3Agb2YgeW91ciBjaG9pY2Ugb24gRmVkb3JhIDI4CiAgICBmcmVlOiBUcnVlCiAgICBtZXRh\
ZGF0YToge30KICAgIHVwZGF0ZXNfdG86CiAgICAtIGYyNwogICAgcGFyYW1ldGVyczoKICAgIC0g\
bmFtZTogdm5jcGFzcwogICAgICB0aXRsZTogVk5DIFBhc3N3b3JkCiAgICAgIHR5cGU6IHN0cmlu\
ZwogICAgICByZXF1aXJlZDogdHJ1ZQogICAgLSBuYW1lOiBkZQogICAgICB0aXRsZTogRGVza3Rv\
cCBFbnZpcm9ubWVudAogICAgICB0eXBlOiBlbnVtCiAgICAgIGVudW06IFsnZnZ3bScsICdpMycs\
ICdLREUnLCAnTFhERScsICdMWFF0JywgJ01BVEUnLCAnU3VnYXInLCAndHdtJywgJ1hmY2UnXQog\
ICAgICBkZWZhdWx0OiAnWGZjZScKICAgICAgdXBkYXRhYmxlOiB0cnVlCiAgICAtIG5hbWU6IHJl\
c29sdXRpb24KICAgICAgdGl0bGU6IERlc2t0b3AgUmVzb2x1dGlvbgogICAgICB0eXBlOiBlbnVt\
CiAgICAgIGVudW06IFsnODAweDYwMCcsICcxMDI0eDc2OCcsICcxMjgweDEwMjQnLCAnMTM2MHg3\
NjgnLCAnMTQ0MHg5MDAnLCAnMTkyMHgxMDgwJ10KICAgICAgZGVmYXVsdDogJzEzNjB4NzY4Jwog\
ICAgICB1cGRhdGFibGU6IHRydWUKICAtIG5hbWU6IGYyNwogICAgZGVzY3JpcHRpb246IFJ1biBh\
IERlc2t0b3Agb2YgeW91ciBjaG9pY2Ugb24gRmVkb3JhIDI3IAogICAgZnJlZTogVHJ1ZQogICAg\
bWV0YWRhdGE6IHt9CiAgICB1cGRhdGVzX3RvOgogICAgLSBmMjgKICAgIHBhcmFtZXRlcnM6IAog\
ICAgLSBuYW1lOiB2bmNwYXNzCiAgICAgIHRpdGxlOiBWTkMgUGFzc3dvcmQKICAgICAgdHlwZTog\
c3RyaW5nCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAtIG5hbWU6IGRlCiAgICAgIHRpdGxlOiBE\
ZXNrdG9wIEVudmlyb25tZW50CiAgICAgIHR5cGU6IGVudW0KICAgICAgZW51bTogWydmdndtJywg\
J2kzJywgJ0tERScsICdMWERFJywgJ0xYUXQnLCAnTUFURScsICdTdWdhcicsICd0d20nLCAnWGZj\
ZSddCiAgICAgIGRlZmF1bHQ6ICdYZmNlJwogICAgICB1cGRhdGFibGU6IHRydWUKICAgIC0gbmFt\
ZTogcmVzb2x1dGlvbgogICAgICB0aXRsZTogRGVza3RvcCBSZXNvbHV0aW9uCiAgICAgIHR5cGU6\
IGVudW0KICAgICAgZW51bTogWyc4MDB4NjAwJywgJzEwMjR4NzY4JywgJzEyODB4MTAyNCcsICcx\
MzYweDc2OCcsICcxNDQweDkwMCcsICcxOTIweDEwODAnXQogICAgICBkZWZhdWx0OiAnMTM2MHg3\
NjgnCiAgICAgIHVwZGF0YWJsZTogdHJ1ZQo="



COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
