FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IHZuYy1kZXNrdG9wLWFwYgpkZXNjcmlwdGlvbjogVGhpcyBpcyBh\
IHNhbXBsZSBhcHBsaWNhdGlvbiBnZW5lcmF0ZWQgYnkgYXBiIGluaXQKYmluZGFibGU6IEZhbHNl\
CmFzeW5jOiBvcHRpb25hbAptZXRhZGF0YToKICBkaXNwbGF5TmFtZTogIlZOQyBEZXNrdG9wIChB\
UEIpIgogIGltYWdlVXJsOiAiaHR0cHM6Ly91cGxvYWQud2lraW1lZGlhLm9yZy93aWtpcGVkaWEv\
Y29tbW9ucy9hL2E5L1RpZ2VyVk5DX2xvZ28uc3ZnIgogIGRlcGVuZGVuY2llczoKICAtIGRvY2tl\
ci5pby9hbnNpYmxlcGxheWJvb2tidW5kbGUvdm5jLWNsaWVudDpsYXRlc3QKICAtIGRvY2tlci5p\
by9hbnNpYmxlcGxheWJvb2tidW5kbGUvdm5jLWRlc2t0b3A6ZjI4CiAgLSBkb2NrZXIuaW8vYW5z\
aWJsZXBsYXlib29rYnVuZGxlL3ZuYy1kZXNrdG9wOmYyNwpwbGFuczoKICAtIG5hbWU6IGYyOAog\
ICAgZGVzY3JpcHRpb246IFJ1biBhIGRlc2t0b3Agb2YgeW91ciBjaG9pY2Ugb24gRmVkb3JhIDI4\
CiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToge30KICAgIHBhcmFtZXRlcnM6CiAgICAtIG5h\
bWU6IHZuY3Bhc3MKICAgICAgdGl0bGU6IFZOQyBQYXNzd29yZAogICAgICB0eXBlOiBzdHJpbmcK\
ICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIC0gbmFtZTogZGUKICAgICAgdGl0bGU6IERlc2t0b3Ag\
RW52aXJvbm1lbnQKICAgICAgdHlwZTogZW51bQogICAgICBlbnVtOiBbJ2Z2d20nLCAnaTMnLCAn\
S0RFJywgJ0xYREUnLCAnTFhRdCcsICdNQVRFJywgJ1N1Z2FyJywgJ3R3bScsICdYZmNlJ10KICAg\
ICAgZGVmYXVsdDogJ1hmY2UnCiAgICAgIHVwZGF0YWJsZTogdHJ1ZQogICAgLSBuYW1lOiByZXNv\
bHV0aW9uCiAgICAgIHRpdGxlOiBEZXNrdG9wIFJlc29sdXRpb24KICAgICAgdHlwZTogZW51bQog\
ICAgICBlbnVtOiBbJzgwMHg2MDAnLCAnMTAyNHg3NjgnLCAnMTI4MHgxMDI0JywgJzEzNjB4NzY4\
JywgJzE0NDB4OTAwJywgJzE5MjB4MTA4MCddCiAgICAgIGRlZmF1bHQ6ICcxMzYweDc2OCcKICAg\
ICAgdXBkYXRhYmxlOiB0cnVlCiAgLSBuYW1lOiBmMjcKICAgIGRlc2NyaXB0aW9uOiBSdW4gYSBE\
ZXNrdG9wIG9mIHlvdXIgY2hvaWNlIG9uIEZlZG9yYSAyNyAKICAgIGZyZWU6IFRydWUKICAgIG1l\
dGFkYXRhOiB7fQogICAgcGFyYW1ldGVyczogCiAgICAtIG5hbWU6IHZuY3Bhc3MKICAgICAgdGl0\
bGU6IFZOQyBQYXNzd29yZAogICAgICB0eXBlOiBzdHJpbmcKICAgICAgcmVxdWlyZWQ6IHRydWUK\
ICAgIC0gbmFtZTogZGUKICAgICAgdGl0bGU6IERlc2t0b3AgRW52aXJvbm1lbnQKICAgICAgdHlw\
ZTogZW51bQogICAgICBlbnVtOiBbJ2Z2d20nLCAnaTMnLCAnS0RFJywgJ0xYREUnLCAnTFhRdCcs\
ICdNQVRFJywgJ1N1Z2FyJywgJ3R3bScsICdYZmNlJ10KICAgICAgZGVmYXVsdDogJ1hmY2UnCiAg\
ICAgIHVwZGF0YWJsZTogdHJ1ZQogICAgLSBuYW1lOiByZXNvbHV0aW9uCiAgICAgIHRpdGxlOiBE\
ZXNrdG9wIFJlc29sdXRpb24KICAgICAgdHlwZTogZW51bQogICAgICBlbnVtOiBbJzgwMHg2MDAn\
LCAnMTAyNHg3NjgnLCAnMTI4MHgxMDI0JywgJzEzNjB4NzY4JywgJzE0NDB4OTAwJywgJzE5MjB4\
MTA4MCddCiAgICAgIGRlZmF1bHQ6ICcxMzYweDc2OCcKICAgICAgdXBkYXRhYmxlOiB0cnVlCg=="



COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
